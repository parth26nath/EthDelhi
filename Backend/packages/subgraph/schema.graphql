type Guardian @entity {
  id: ID!
  wallet: Bytes!
  chipId: Bytes!
  timestamp: BigInt!
  tokenId: BigInt!
  posts: [Post!]! @derivedFrom(field: "author")
  upvotes: [Upvote!]! @derivedFrom(field: "voter")
  rewards: [Reward!]! @derivedFrom(field: "recipient")
}

type Post @entity {
  id: ID!
  author: Guardian
  authorAddress: Bytes!
  cid: String!
  createdAt: BigInt!
  upvotes: Int!
  upvoteList: [Upvote!]! @derivedFrom(field: "post")
}

type Upvote @entity {
  id: ID!
  post: Post!
  voter: Guardian
  voterAddress: Bytes!
  timestamp: BigInt!
}

type Reward @entity {
  id: ID!
  recipient: Guardian
  recipientAddress: Bytes!
  amount: BigInt!
  timestamp: BigInt!
}

type Clinic @entity {
  id: ID!
  address: Bytes!
  registeredAt: BigInt!
  verifications: [ChipVerification!]! @derivedFrom(field: "clinic")
}

type ChipVerification @entity {
  id: ID!
  chipId: Bytes!
  clinic: Clinic!
  timestamp: BigInt!
  guardian: Guardian
}

type GlobalStats @entity {
  id: ID!
  totalGuardians: Int!
  totalPosts: Int!
  totalUpvotes: Int!
  totalRewards: BigInt!
  lastUpdated: BigInt!
}